# Vue

Vue 是一个非常流行的前端框架，现在你可以配合 Rspack 使用 Vue 的相关功能。

## Vue3

目前，Rspack 已经完成了对 Vue3 的支持，请确保你的 [vue-loader](https://github.com/vuejs/vue-loader) 版本 >= 17.2.2，并进行如下配置：

```js title="rspack.config.js"
const { VueLoaderPlugin } = require('vue-loader');

/** @type {import('@rspack/cli').Configuration} */
const config = {
  // ...
  plugins: [new VueLoaderPlugin()],
  module: {
    rules: [
      // ...
      {
        test: /\.vue$/,
        loader: 'vue-loader',
        options: {
          // 注意，为了绝大多数功能的可用性，请确保该选项为 `true`
          experimentalInlineMatchResource: true,
        },
      },
    ],
  },
};
module.exports = config;
```

由于 Rspack 原生支持了 CSS 模块的编译，因此你无需配置与 CSS 相关的 loader。另外，当你尝试使用 CSS 预处理器（如：less）时，你只需要添加如下配置即可：

```diff
const config = {
  module: {
    rules: [
+      {
+        test: /\.less$/,
+        loader: "less-loader"
+        type: "css"
+      }
    ]
  }
}
module.exports = config;
```

此时，Rspack 将会使用内置的 CSS 处理器进行后处理。

除此之外，由于 Rspack 内置了 TS 的支持，因此我们也默认支持了 `lang="ts"` 的配置：

```html
<script lang="ts">
  export default {
    // ...
  };
</script>
```

相关示例可以参考 [example-vue3](https://github.com/web-infra-dev/rspack/tree/main/examples/vue)。

## Vue2

Rspack 已经完成对 Vue2（使用 vue-loader@15）的兼容。目前，尽管 vue-loader@15 暂时无法便捷地配合内置的 TS、CSS 功能使用，但你依旧可以配合 style-loader 与 css-loader 进行样式生成。

请确保在配置 Vue2 项目时关闭 `experiments.css` 或在 CSS 相关的规则中使用 `Rule.type = "javascript/auto"`：

```js title="rspack.config.js"
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['vue-style-loader', 'css-loader'],
        type: 'javascript/auto',
      },
    ],
  },
  experiments: {
    css: false,
  },
};
```

相关示例可以参考：[example-vue2](https://github.com/web-infra-dev/rspack/tree/main/examples/vue2)。

## Vue 3 JSX

由于 Rspack 支持使用 `babel-loader` 进行转换，因此你可以直接使用 [@vue/babel-plugin-jsx](https://github.com/vuejs/babel-plugin-jsx) 插件来支持 Vue 3 JSX 语法。

### 安装依赖

首先，你需要安装 [babel-loader](https://www.npmjs.com/package/babel-loader)、[@babel/core](https://www.npmjs.com/package/@babel/core) 和 [@vue/babel-plugin-jsx](https://www.npmjs.com/package/@vue/babel-plugin-jsx)：

import { Tabs, Tab } from '@theme';

<Tabs values={[{ label: 'npm' }, { label: 'yarn' }, { label: 'pnpm' }]}>
  <Tab>

```sh
npm install -D babel-loader @babel/core @vue/babel-plugin-jsx
```

  </Tab>

  <Tab>

```sh
yarn add -D babel-loader @babel/core @vue/babel-plugin-jsx
```

  </Tab>

  <Tab>

```sh
pnpm install -D babel-loader @babel/core @vue/babel-plugin-jsx
```

  </Tab>
</Tabs>

### 添加配置

然后添加以下配置，即可在 `.jsx` 文件中使用 Vue 3 JSX 语法：

```js title="rspack.config.js"
/** @type {import('@rspack/cli').Configuration} */
const config = {
  context: __dirname,
  entry: {
    main: './src/index.jsx',
  },
  module: {
    rules: [
      {
        test: /\.jsx$/,
        use: [
          {
            loader: 'babel-loader',
            options: {
              plugins: ['@vue/babel-plugin-jsx'],
            },
          },
        ],
      },
    ],
  },
  builtins: {
    html: [
      {
        template: './index.html',
      },
    ],
  },
};
module.exports = config;
```

Rspack 提供了一个 Vue JSX 的[示例](https://github.com/web-infra-dev/rspack/tree/main/examples/vue3-jsx)可供参考。
