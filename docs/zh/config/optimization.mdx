import PropertyType from '../../../components/property-type.tsx';

# Optimization 优化

Rspack 会根据 [`mode`](/config/mode) 来选择合适的优化配置。同时，你也可以通过 [`optimization`](/config/optimization) 来自定义优化配置。

## optimization.removeAvailableModules

<PropertyType.CN type="boolean" defaultValue="true" />

如果一个 Chunk 的模块都已经被包含在其所有的父 Chunk 中，那么这个模块就可以被移除。

```
EntryChunk(index.js, a.js, b.js)
                                  \
                                  ChunkFoo(b.js, c.js)
                                  /
EntryChunk2(index.js, a.js, b.js)
```

在上面的例子中，`b.js` 都已经被包含在 `EntryChunk` 和 `EntryChunk2` ，所以 `b.js` 可以从 `ChunkFoo` 中移除。

:::info Webpack 的差异点

- [Webpack](https://webpack.js.org/configuration/optimization/#optimizationremoveavailablemodules) 只在 `production` 模式下开启这个优化。

:::

## optimization.moduleIds

<PropertyType.CN type="'named' | 'deterministic'" />

| 选项            | 描述                                                                                      |
| --------------- | ----------------------------------------------------------------------------------------- |
| `named`         | 使用有意义、方便调试的内容当作模块 id 。此选项会在开发环境下默认开启。                    |
| `deterministic` | 使用对模块标识符哈希后的数字当作模块 id ， 有益于长期缓存。此选项会在生产环境下默认开启。 |

## optimization.minimize

<PropertyType.CN type="boolean" />

- **默认值：** `true` (生产模式)
- **默认值：** `false` (开发模式)

是否对产物进行压缩。

## optimization.minimizer

自定义压缩器。

```js
const minifyPlugin = require("@rspack/plugin-minify");
module.exports = {
	context: __dirname,
	target: "node",
	entry: {
		main: "./index.js"
	},
	optimization: {
		minimize: true,
		minimizer: [new minifyPlugin(
          minifier: "terser"
        )]
	}
};
```

## optimization.removeEmptyChunks

<PropertyType.CN type="boolean" defaultValue="true" />

移除打包过程中产生的空 Chunk。
