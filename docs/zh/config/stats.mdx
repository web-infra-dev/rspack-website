import PropertyType from '../../../components/property-type.tsx';
import WebpackLicense from '../../../components/webpack-license';

<WebpackLicense from="https://webpack.js.org/configuration/stats/" />

# 打包信息（Status）

生成可用于分析模块的依赖关系图，以及优化编译速度的打包信息。

:::info 输出打包信息的 JSON 文件

- 使用 `@rspack/cli`，`rspack build --json stats.json`。
- 通过 Rspack 的 Node.js API，`stats.toJson(options)`、`stats.toString(options)`。

:::

<PropertyType.CN
  type="boolean | string | Object"
  defaultValueList={[{ defaultValue: 'true' }]}
/>

## 预设（Stats Presets）

| 预设                | 描述                            |
| ------------------- | ------------------------------- |
| `'normal'` (`true`) | 按照 stats options 的默认值输出 |
| `'none'` (`false`)  | 不输出任何信息                  |
| `'verbose'`         | 输出所有信息                    |
| `'errors-only'`     | 只输出错误相关信息              |
| `'errors-warnings'` | 只输出错误和警告相关信息        |

## 详细选项（Stats Options）

可以指定具体哪些打包信息进行输出，以下所有字段都是可选（optional）的。

### stats.assets

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出产物相关信息。

### stats.chunks

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出 Chunk 相关信息。

### stats.modules

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出模块相关信息

### stats.entrypoints

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出入口 ChunkGroup 相关信息。

### stats.reasons

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出模块被引入的原因。

### stats.hash

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出本次构建的 hash。

### stats.errors

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出本次构建产生的错误。

### stats.errorsCount

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出本次构建产生的错误的数量。

### stats.warnings

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出本次构建产生的警告。

### stats.warningsCount

<PropertyType.CN type="boolean" defaultValueList={[{ defaultValue: 'true' }]} />

是否输出本次构建产生的警告的数量。

### stats.all

<PropertyType.CN
  type="boolean"
  defaultValueList={[{ defaultValue: 'undefined' }]}
/>

控制所有 stats options 是否输出。

### stats.preset

<PropertyType.CN
  type="boolean"
  defaultValueList={[{ defaultValue: 'undefined' }]}
/>

按照预设值进行输出。

## 扩展打包信息输出行为

如果你想使用预设的输出行为，但又想多输出或少输出个别字段，可以在指定 preset 或 all 之后对字段的输出行为进行自定义。

举例来说，只输出错误和模块被引入的原因：

```js title=rspack.config.js
module.exports = {
  // ...
  stats: {
    preset: 'errors-only',
    reasons: true,
  },
};
```
