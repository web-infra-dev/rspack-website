# Migration from webpack

While Rspack is aimed at maximizing compatibility with Webpack API contracts, some minor changes are necessary to accommodate differences in implementation, as well as enabling optimizations by replacing some plugins/loaders with Rspack's built-in equivalents.

> Based on webpack 5.

> 游릴 : support
>
> 游린 : not support
>
> 游릲 : partially support

## Entry

- string 游릴
- string[] 游릴
- EntryObject 游릲

  - `import: EntryItem` 游릴
  - `runtime?: string | false` 游릴
  - ...others 游린

- Function 游린

## Context 游릴

## Mode 游릴

## Output

Others

### Output.assetModuleFilename 游릲

- string 游릴
- function 游린

### Output.filename 游릲

- string 游릴
- function 游린

### Output.chunkFilename 游릲

- string 游릴
- function 游린

### Output.cssFilename 游릲

- string 游릴
- function 游린

### Output.cssChunkFilename 游릲

- string 游릴
- function 游린

### Output.path 游릴

- string

### Output.publicPath 游릲

- string 游릴
- function 游린

### Output.strictModuleErrorHandling 游릴

- boolean

### Output.[...others] 游린

### Template strings 游릲

#### Compilation-level 游릲

- [fullhash] 游릴
- [hash] 游린

#### Chunk-level 游릴

- [id] 游릴
- [name] 游릴
- [chunkhash] 游릴
- [contenthash] 游릴

#### Module-level 游릲

- [id] 游릴
- [moduleid] 游린
- [hash] 游릴
- [modulehash] 游린
- [contenthash] 游릴

#### File-level 游릲

- [file] 游린
- [query] 游릴
- [fragment] 游린
- [base] 游린
- [filebase] 游린
- [path] 游릴
- [name] 游릴
- [ext] 游릴

#### URL-level 游린

- [url] 游린

## Module

### Module.generator 游린

### Module.parser 游릲

### Rule

#### Rule Condition 游릲

- string 游릴
- RegExp 游릴
- function 游린

#### Rule.exclude 游릴

#### Rule.include 游릴

#### Rule.loaders 游릴

Prefer to `Rule.use`

#### Rule.parse 游릴

- dataUrlCondition 游릴

#### Rule.generator 游릲

- filename 游릴
- dataUrl 游린
- emit 游린
- publicPath 游린
- outputPath 游린

#### Rule.resource 游릴

#### Rule.resourceQuery 游릴

#### Rule.sideEffects 游릴

#### Rule.test 游릴

#### Rule.type 游릲

- asset/resource 游릴
- asset/inline 游릴
- asset/source 游릴
- asset 游릴

Other types supported by Rspack:

- javascript/auto
- typescript
- css
- css/module
- json

#### Rule.use 游릲

- useEntry 游릴
- function 游린

#### Rule.resolve 游릲

#### Rule.[...others] 游린

## Resolve

### Resolve.alias 游릴

### Resolve.aliasField 游릲

The types of this configuration are different:

- webpack: `string[]`
- Rspack: `Boolean`

### Resolve.conditionNames 游릴

### Resolve.extensions 游릲

Default value are diffrent:

- webpack: `['.js', '.json', '.wasm']`
- rspack: `['.tsx', '.jsx', '.ts', '.js', '.json', '.d.ts']`

### Resolve.fallback 游릴

### Resolve.mainFields 游릴

### Resolve.mainFiles 游릴

### Resolve.modules 游릴

### Resolve.preferRelative 游릴

### Resolve.[...others] 游린

## Optimization

### Optimization.moduleIds 游릲

- natural 游린
- named 游릴
- deterministic 游릴
- size 游린

### Optimization.minimize 游릴

### Optimization.minimizer 游릲 ???

- plugins[] 游릴
- function 游린

### Optimization.removeAvailableModules 游릲

Default value are different:

- webpack: only `true` in production mode
- rspack: always `true`

### Optimization.removeEmptyChunks 游릴

### Optimization.runtimeChunk 游릲

- object 游린
- string 游린
- boolean 游릴

### Optimization.sideEffects 游릴

### Optimization.splitChunks 游릲

_Default configurations are completely identical._

#### splitChunks.automaticNameDelimiter 游릴

#### splitChunks.chunks 游릴

#### splitChunks.maxAsyncRequests 游릴

#### splitChunks.maxInitialRequests 游릴

#### splitChunks.defaultSizeTypes 游릴

#### splitChunks.minChunks 游릴

#### splitChunks.hidePathInfo

#### splitChunks.minSize 游릲

- number 游릴
- object 游린

#### splitChunks.minSizeReduction 游릲

- number 游릴
- object 游린

#### splitChunks.enforceSizeThreshold 游릴

#### splitChunks.minRemainingSize 游릴

#### splitChunks.layer 游린

#### splitChunks.maxSize 游릴

#### splitChunks.maxAsyncSize 游릴

#### splitChunks.maxInitialSize 游릴

#### splitChunks.name 游릴

#### splitChunks.usedExports 游린

#### splitChunks.cacheGroups 游릲

## Plugins

Some plugins can be replaced by built-in features: [plugin-compat](/guide/plugin-compat).

Custom plugin apis : [plugin-api](/api/plugin-api)

### DefinePlugin 游릴

use `builtins.define`

### html-webpack-plugin 游릴

Rspack has built-in support for HTML. This means you can use `builtins.html` instead of `html-webpack-plugin`:

```diff
 const HtmlWebpackPlugin = require("html-webpack-plugin");

 module.exports = {
+  builtins: {
+    html: [
+      {
+        template: "index.html",
+        filename: "index.html",
+      },
+    ],
+  },
-  plugins: [
-    new HtmlWebpackPlugin({
-      template: "index.html",
-      filename: "index.html",
-    }),
-  ],
 };
```

## Loaders

### Removing babel-loader

Rspack already has built-in support for TypeScript and JSX as well as the latest ECMAScript syntaxes. If your configuration only uses `babel-loader` to support TypeScript, JSX, and modern ECMAScript, then you can remove `babel-loader` entirely.

Alternatively, if your configuration relies on `babel-loader` for custom conversion logic, it should be kept. However, we recommend to avoid `babel-loader` if possible because it can cause significant performance degradation for large projects.

```diff
 module.exports = {
   module: {
-    rules: [
-      {
-        test: /\.tsx?$/i,
-        use: [
-          {
-            loader: 'babel-loader',
-            options: {
-              presets: ['@babel/preset-typescript'],
-            },
-          },
-        ],
-        test: /\.jsx?$/i,
-        use: [
-          {
-            loader: 'babel-loader',
-            options: {
-              presets: ['@babel/preset-react'],
-            },
-          },
-        ],
-      },
-    ],
   },
 };
```

Rspack also supports JavaScript syntax downgrading by default. This means you don't need to use `babel-loader` to support browser compatibility anymore. Specify your browser compatibility via [target](/config/target) and [builtins.presetEnv](/config/builtins#builtinspresetenv) as in this example:

```diff
 module.exports = {
+  builtins: {
+    presetEnv: {
+      targets: ['es5'],
+    },
+  },
+  target: ['web', 'es5'],
   module: {
     rules: [
-      {
-        test: /\.jsx?$/i,
-        use: [
-          {
-            loader: 'babel-loader',
-            options: {
-              presets: ['@babel/preset-env'],
-            },
-          },
-        ],
-      },
     ],
   },
 };
```

### Removing css-loader and style-loader and mini-css-extract-plugin

Rspack's native CSS Module type has built-in support for CSS, CSS HMR, CSS Modules, and CSS extraction. This eliminates the need for `css-loader`, `style-loader`, and `mini-css-extract-plugin` for handling CSS files:

```diff
-const MiniCssExtractPlugin = require("mini-css-extract-plugin");

 module.exports = {
   module: {
     rules: [
-      {
-        test: /\.css$/i,
-        use: [
-          isDev ? "style-loader" : MiniCssExtractPlugin.loader,
-          "css-loader",
-        ],
-      },
+      {
+        test: /\.css$/i,
+        type: "css", // this is enabled by default for .css, so you don't need to specify it
+      },
     ],
   },
   plugins: [],
 };
```

Rspack's [css-modules](https://github.com/css-modules/css-modules) functionality is enabled by specifying `css/module`` as the module type:

```diff
 module.exports = {
   module: {
     rules: [
+      {
+        test: /\.module\.css$/i,
+        type: "css/module", // this is enabled by default for module.css,   so you don't need to specify it
+      },
     ],
   },
 };
```

### Using asset modules instead of file-loader and url-loader

Rspack is aligned with Webpack 5's "asset modules," which should be used instead of `file-loader` and `url-loader`.

```diff
 module.exports = {
   module: {
     rules: [
+      {
+        test: /\.(png|jpe?g|gif)$/i,
+        type: "asset/resource",
+      },
+      {
+        test: /^BUILD_ID$/,
+        type: "asset/source",
+      },
-      {
-        test: /\.(png|jpe?g|gif)$/i,
-        use: ["file-loader"],
-      },
-      {
-        test: /^BUILD_ID$/,
-        use: ["raw-loader"],
-      },
     ],
   },
 };
```

## DevServer 游릲

// todo

## Cache 游린

rspack only supports setting to boolean values.

## Devtool 游릴

## Target 游릲

- async-node[[X].Y] 游린
- electron[[X].Y]-main 游린
- electron[[X].Y]-renderer 游린
- electron[[X].Y]-preload 游린
- node[[X].Y] 游릲
  - `node`
- node-webkit[[X].Y] 游린
- nwjs[[X].Y] 游린
- web 游릴
- webworker 游릲
  - Rename to `web-worker`
- esX 游릴
- browserslist 游릴

## Watch and WatchOptions 游릲

### Watch 游릴

### WatchOptions.aggregateTimeout 游린

### WatchOptions.ignored 游릴

### WatchOptions.poll 游릴

### WatchOptions.followSymlinks 游린

### WatchOptions.stdin 游린

## Externals 游릲

- string 游릴
- object 游릴
- function 游린
- RegExp 游린
- [] 游린

### ExternalsType 游릲

- commonjs 游릴
- global 游릴
- module 游릴
- promise 游린
- self 游릴
- script 游린
- this 游릴
- var 游릴
- window 游릴

Other value supported by rspack:

- amd
- amd-require
- import
- jsonp
- node-commonjs
- system
- umd
- umd2

## Performance 游린

## Node 游릲

### Node.global 游릴

### Node.\_\_dirname 游릴

### Node.\_\_filename 游린

## Stats 游릲

// todo

## Experiments 游린

Although both have the `experiments` configuration option, the experimental features of webpack and rspack are completely different, so do not configure webpack's experimental features in rspack.
