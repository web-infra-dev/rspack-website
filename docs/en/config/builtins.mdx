# Builtins

Used to set the built-in functions provided by Rspack.

- **Type:** `Record<string, any>`
- **Default:** `{}`

:::warning Stability Warning

The built-in functionality provided by _builtins_ may change in the future or be replaced with a better solution, so please note the changes to the builtins when you upgrade and we will highlight them in the [Release Notes](https://github.com/modern-js-dev/rspack/releases).

:::

## builtins.emotion

Using optimization for emotion in compile-time.

- **Type:**

```ts
export type EmotionConfig = 
  | boolean
  | {
    sourceMap?: boolean;
    autoLabel?: "never" | "dev-only" | "always";
    labelFormat?: string;
    importMap?: {
      [packageName: string]: {
        [exportName: string]: {
          canonicalImport?: [string, string];
        };
      };
    };
  };
```

- **Default:** `false`

If you are using `emotion` in your project, and want functionality which is similar to [@emotion/babel-plugin](https://emotion.sh/docs/@emotion/babel-plugin), you can enable `builtins.emotion` option, Rspack will use `swc_emotion` plugin to transpile your `emotion` code.

### Example

You can enable default options by specify `builtins.emotion: true`.

```ts title="rspack.config.js"
module.exports = {
  context: __dirname,
  entry: {
    main: './src/index.js',
  },
  builtins: {
    emotion: true
  }
};
```

Each field name is the same with [@emotion/babel-plugin](https://emotion.sh/docs/@emotion/babel-plugin), more detailed explanation (content below is from the official document of @emotion/babel-plugin):

#### autoLabel

- **Type:** `'never' | 'dev-only' | 'always'`
- **Default:** `'dev-only'`

This option is used for:
- Automatically adds the label property to styles so that class names generated by css or styled include the name of the variable the result is assigned to.
- Please note that non word characters in the variable will be removed (Eg. `iconStyles$1` will become `iconStyles1`) because `$` is not valid[CSS ClassName Selector](https://stackoverflow.com/questions/448981/which-characters-are-valid-in-css-class-names-selectors#449000)ã€‚

Each possible value for this option produces different output code:

- `'dev-only'` - we optimize the production code, so there are no labels added there, but at the same time we keep labels for development environments,
- `'always'` - we always add labels when possible,
- `'never'` - we disable this entirely and no labels are added.

#### labelFormat

- **Type:** `string`
- **Default:** `"[local]"`

This option only works when `'autoLabel'` is set to `'dev-only'` or `'always'`. It allows you to define the format of the resulting `label`. The format is defined via string where variable parts are enclosed in square brackets `[]`. For example labelFormat: `"my-classname--[local]"`, where `'[local]'` will be replaced with the name of the variable the result is assigned to.

Allowed values:
- `'[local]'` - the name of the variable the result of the css or styled expression is assigned to.
- `'[filename]'` - name of the file (without extension) where css or styled expression is located.
- `'[dirname]'` - name of the directory containing the file where css or styled expression is located.

This format only affects the label property of the expression, meaning that the css prefix and hash will be prepended automatically.

#### sourceMap

- **Type:** `boolean`

Whether to inject source maps. By default, this will be disabled in production mode, and enabled in development mode.

#### importMap

- **Type:**

```ts
export type ImportMap = undefined | {
  [packageName: string]: {
    [exportName: string]: {
      canonicalImport?: [string, string];
    };
  };
};
```

- **Default:** `undefined`

This option allows you to tell Rspack what imports it should look at to determine what it should transform so if you re-export Emotion's exports, you can still use the Babel transforms
