import PropertyType from '../../../components/property-type.tsx';

# Optimization

Rspack will select appropriate optimization configuration based on the [`mode`](/config/mode). You can also customize the configuration via [`optimization`](/config/optimization).

## optimization.removeAvailableModules

<PropertyType type="boolean" defaultValue="true" />

A module can be removed from a Chunk if the module have been included in all of its parent Chunks.

```
EntryChunk(index.js, a.js, b.js)
                                  \
                                  ChunkFoo(b.js, c.js)
                                  /
EntryChunk2(index.js, a.js, b.js)
```

In the above example, `b.js` has already been included in `EntryChunk` and `EntryChunk2`, so `b.js` can be removed from `ChunkFoo`.

:::info Inconsistent behaviors with Webpack

- [Webpack](https://webpack.js.org/configuration/optimization/#optimizationremoveavailablemodules) only enable this optimization in `production` mode。

:::

## optimization.moduleIds

<PropertyType type="'named' | 'deterministic'" />

| 选项            | 描述                                                                                                                               |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `named`         | Use meaningful, easy-to-debug content as id. This option is enabled by default in development mode                                 |
| `deterministic` | Use the hashed module identifier as the id to benefit from long-term caching. This option is enabled by default in production mode |

## optimization.minimize

<PropertyType type="boolean" />

- **Default:** `true` (development mode)
- **Default:** `false` (production mode)

Whether to minimize the bundle.

## optimization.minimizer

customize the minimizer.

```js
const minifyPlugin = require("@rspack/plugin-minify");
module.exports = {
	context: __dirname,
	target: "node",
	entry: {
		main: "./index.js"
	},
	optimization: {
		minimize: true,
		minimizer: [new minifyPlugin(
          minifier: "terser"
        )]
	}
};
```

## optimization.removeEmptyChunks

<PropertyType.CN type="boolean" defaultValue="true" />

Remove empty chunks generated in the compilation.

## optimization.runtimeChunk

<PropertyType.CN type="boolean" defaultValue="true" />
